"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.default = tee;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _from = _interopRequireDefault(require("@babel/runtime/core-js/array/from"));

var _range = _interopRequireDefault(require("./range"));

var _map = _interopRequireDefault(require("./map"));

var _iter = _interopRequireDefault(require("./iter"));

var _dequeue = _interopRequireDefault(require("dequeue"));

function tee(iterable, number) {
  var _marked =
  /*#__PURE__*/
  _regenerator.default.mark(teeGen);

  number = number || 2;
  iterable = (0, _iter.default)(iterable);
  var arrays = (0, _from.default)((0, _map.default)(function () {
    return new _dequeue.default();
  }, (0, _range.default)(number)));
  var done = false;

  function fetch() {
    var newItem = iterable.next();

    if (newItem.done) {
      done = true;
    } else {
      arrays.forEach(function (ar) {
        return ar.push(newItem.value);
      });
    }
  }

  function teeGen(a) {
    return _regenerator.default.wrap(function teeGen$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!true) {
              _context.next = 13;
              break;
            }

            if (!a.length) {
              _context.next = 6;
              break;
            }

            _context.next = 4;
            return a.shift();

          case 4:
            _context.next = 11;
            break;

          case 6:
            if (!done) {
              _context.next = 10;
              break;
            }

            return _context.abrupt("return");

          case 10:
            fetch();

          case 11:
            _context.next = 0;
            break;

          case 13:
          case "end":
            return _context.stop();
        }
      }
    }, _marked, this);
  }

  return arrays.map(function (a) {
    return teeGen(a);
  });
}

module.exports = exports["default"];