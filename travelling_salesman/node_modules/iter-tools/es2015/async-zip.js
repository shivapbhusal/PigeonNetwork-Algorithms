"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = zip;

var _promise = _interopRequireDefault(require("@babel/runtime/core-js/promise"));

var _awaitAsyncGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/awaitAsyncGenerator"));

var _wrapAsyncGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapAsyncGenerator"));

var _asyncIter = _interopRequireDefault(require("./async-iter"));

function zip() {
  return _zip.apply(this, arguments);
}

function _zip() {
  _zip = (0, _wrapAsyncGenerator2.default)(function* () {
    const iters = Array.prototype.map.call(arguments, arg => (0, _asyncIter.default)(arg));

    while (true) {
      const results = yield (0, _awaitAsyncGenerator2.default)(_promise.default.all(iters.map(iter => iter.next())));
      const done = results.some(r => r.done);
      if (done) return;
      yield results.map(r => r.value);
    }
  });
  return _zip.apply(this, arguments);
}

module.exports = exports["default"];