"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = zipLongest;

var _promise = _interopRequireDefault(require("@babel/runtime/core-js/promise"));

var _awaitAsyncGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/awaitAsyncGenerator"));

var _wrapAsyncGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapAsyncGenerator"));

var _asyncIter = _interopRequireDefault(require("./async-iter"));

function zipLongest(_x) {
  return _zipLongest.apply(this, arguments);
}

function _zipLongest() {
  _zipLongest = (0, _wrapAsyncGenerator2.default)(function* (filler) {
    const iters = Array.prototype.slice.call(arguments, 1).map(arg => (0, _asyncIter.default)(arg));

    while (true) {
      const results = yield (0, _awaitAsyncGenerator2.default)(_promise.default.all(iters.map(iter => iter.next())));
      const done = results.every(r => r.done);
      if (done) return;
      yield results.map(r => r.done ? filler : r.value);
    }
  });
  return _zipLongest.apply(this, arguments);
}

module.exports = exports["default"];