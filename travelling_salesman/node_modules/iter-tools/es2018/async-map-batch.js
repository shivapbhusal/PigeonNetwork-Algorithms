"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = curriedAsyncMapBatch;

var _asyncBatch = _interopRequireDefault(require("./async-batch"));

var _map = _interopRequireDefault(require("./map"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function* asyncMapBatch(number, func, iterable) {
  for await (const items of (0, _asyncBatch.default)(number, iterable)) {
    const results = await Promise.all((0, _map.default)(func, items));
    yield* results;
  }
}

function curriedAsyncMapBatch(number, func, iterable) {
  if (!iterable) {
    return iterable => asyncMapBatch(number, func, iterable);
  }

  return asyncMapBatch(number, func, iterable);
}

module.exports = exports["default"];